#include <bits/stdc++.h>

using namespace std;

#ifndef ONLINE_JUDGE
#include "trace.cpp"
#else
#define dbg(...)
#endif

#define all(x) (x).begin(), (x).end()
#define make_unique(x) sort(all((x))); (x).erase(unique(all((x))), (x).end())

int32_t main() {
  cin.tie(0) -> sync_with_stdio(0);
  int n, m;
  cin >> n >> m;
  vector<vector<int>> mx(n, vector<int>(m)), al(n, vector<int>(m));
  vector<int> avail(m);
  for (int i = 0; i < n; i++) {
    for (int j = 0; j < m; j++) {
      cin >> mx[i][j];
    }
  }
  for (int i = 0; i < n; i++) {
    for (int j = 0; j < m; j++) {
      cin >> al[i][j];
    }
  }
  vector<vector<int>> need(n, vector<int>(m, 0));
  for (int i = 0; i < n; i++) {
    for (int j = 0; j < m; j++) {
      need[i][j] = mx[i][j] - al[i][j];
      // cout << need[i][j] << " \n"[j == m - 1];
    }
  }
  for (int i = 0; i < m; i++) cin >> avail[i];
  vector<int> done(n, 0), order;
  while (accumulate(all(done), 0) < n) {
    bool found = false;
    for (int i = 0; i < n; i++) {
      if (done[i]) continue;
      bool ok = true;
      for (int j = 0; j < m; j++) {
        if (need[i][j] > avail[j]) {
          ok = false;
          break;
        }
      }
      if (!ok) continue;
      for (int j = 0; j < m; j++) {
        avail[j] += al[i][j];
      }
      order.push_back(i);
      done[i] = 1;
      found = true;
    }
    if (!found) {
      cout << "Unsafe System, deadlock!\n";
      return 0;
    }
  }
  cout << "Safe System!\n";
  cout << "Safe seqence: ";
  for (int i = 0; i < n; i++) {
    cout << order[i] + 1 << " \n"[i == n - 1];
  }
  return 0;
}
